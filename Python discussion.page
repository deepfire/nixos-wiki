[[edit](/w/index.php?title=Python_discussion&action=edit&section=1 "Edit section: python basics")] python basics
----------------------------------------------------------------------------------------------------------------

-   **\*.pth** files

Python supports \*.pth files which contain the paths to the parent
directories of your python modules one per line. Those files are placed
in site-packages and are typically generated by python package managers
such as easy\_install.

-   PYTHONPATH

The other way is to set additional paths for the required modules before
running python. This is done by setting the python paths in the
environment variable PYTHONPATH. A path typcially looks like this on a
Nix system:
/nix/store/fxpfc2hyw5qbxly8xwrxzai8lny4pcq2-ipython-0.11/lib/python2.7/site-packages/ipython-0.11-py2.7.egg

-   PYTHONUSERBASE

?

in general see [6]

[[edit](/w/index.php?title=Python_discussion&action=edit&section=2 "Edit section: general python integration into nixos")] general python integration into nixos
----------------------------------------------------------------------------------------------------------------------------------------------------------------

### [[edit](/w/index.php?title=Python_discussion&action=edit&section=3 "Edit section: requirements")] requirements

-   mix python 2.x and 3.x in the same profile

marcweber and qknight **vote against that**. it makes packaging
complicated: to mix python2 and python3? We could introduce
NIX\_PYTHON\_SITES\_2 and NIX\_PYTHON\_SITES\_3 or such. a better way is
to use load-env-whatever (see [7])

-   pyLibA (python wrapper for a library) is used by pyLibB: nix
    expressions must be able to use either

### [[edit](/w/index.php?title=Python_discussion&action=edit&section=4 "Edit section: proposed nixos environment variables")] proposed nixos environment variables

-   NIX\_PYTHON\_SITES

[[edit](/w/index.php?title=Python_discussion&action=edit&section=5 "Edit section: qknight's problems")] qknight's problems
--------------------------------------------------------------------------------------------------------------------------

### [[edit](/w/index.php?title=Python_discussion&action=edit&section=6 "Edit section: packaging virt-manager")] packaging virt-manager

see **problem 2** in [5]

### [[edit](/w/index.php?title=Python_discussion&action=edit&section=7 "Edit section: python-gudev")] python-gudev

i have problems packaging python-gudev:

     gudevmodule.c:19:23: fatal error: pygobject.h: No such file or directory

but looking at the exports (nix-env -i python-gudev -K; source env-vars)
i can see:

    -I/nix/store/lqsihhkhl7rhr18x7qiviihyp2byc5gw-pygobject-2.27.0/include

but in that folder there is only pygtk-2.0 folder:

     ls -la /nix/store/lqsihhkhl7rhr18x7qiviihyp2byc5gw-pygobject-2.27.0/include
     pygtk-2.0/

so in that folder i find:

     ls -la /nix/store/lqsihhkhl7rhr18x7qiviihyp2byc5gw-pygobject-2.27.0/include/pygtk-2.0/
     pyglib.h  pygobject.h

### [[edit](/w/index.php?title=Python_discussion&action=edit&section=8 "Edit section: the problem")] the problem

as discussed in [1] and quoting [2]

       # All python code is installed into a "gtk-2.0" sub-directory. That
       # sub-directory may be useful on systems which share several library
       # versions in the same prefix, i.e. /usr/local, but on Nix that directory
       # is useless. Furthermore, its existence makes it very hard to guess a
       # proper $PYTHONPATH that allows "import gtk" to succeed.

so how should i package python-gudev then? the source for python-gudev
(which produces the above error) can be found at [4]

[[edit](/w/index.php?title=Python_discussion&action=edit&section=9 "Edit section: links")] links
------------------------------------------------------------------------------------------------

-   [1] <http://old.nabble.com/Python-3-to22076291.html#a22119842>
-   [2]
    <https://nixos.org/repos/nix/nixpkgs/trunk/pkgs/development/python-modules/pygobject/default.nix>
-   [3] <http://dpaste.com/756606/>
-   [4]
    <https://github.com/NixOS/nixpkgs/blob/master/pkgs/development/python-modules/python-gudev/default.nix>
-   [5]
    <http://permalink.gmane.org/gmane.linux.distributions.nixos/8732>
-   [6]
    <http://djangotricks.blogspot.de/2008/09/note-on-python-paths.html>
-   [7]
    <http://invalidmagic.wordpress.com/2012/03/23/developing-software-using-nixos/>
-   [8] <https://gitorious.org/goibhniu/pages/nix-python> (to be merged
    with this page)

